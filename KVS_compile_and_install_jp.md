# 1.4 インストール #
適当な場所にソースコードをダウンロードまたはSVNを利用してチェックアウトしてください。混乱を避けるために、ダウンロードしたソースコードを解凍するディレクトリと環境変数KVS\_DIRで指定するディレクトリは別ディレクトリとしてください。

## 1.4.1 コンパイルとインストール ##
以下に、OSごとにコンパイルおよびインストールの方法について説明します。

**Windows**

KVSのコンパイルおよびインストールは、コマンドプロンプト上で行います。「スタート」から「すべてのプログラム」を選択し、「Microsoft Visual Studio 2010 Express」から「Visual Studio コマンドプロンプト」をクリック、コマンドプロンプトを起動してください。

Windows環境（Microsoft Visual C++）では、nmakeコマンドを利用してKVSをコンパイルおよびインストールします。以下に実行例を示します。KVSのソースコードは「C:\tmp」下にkvsという名前で展開されているとします。

```
 > cd C:\tmp\kvs      ※ C:\tmp\kvs に移動
 > nmake              ※ コンパイル
 > nmake install      ※ インストール（環境変数KVS_DIRで指定されたフォルダにコピーされる）
```

  * コンパイル時間は、実行環境の性能に依存しますが、約2〜3分程度かかります。コンパイルが正常に終了した後、インストールを行ってください。

**Linux / Mac OS X**

LinuxおよびMac OS Xの場合は、nmakeではなくmakeコマンドを使ってKVSをコンパイルおよびインストールします。ホームディレクトリ直下のtmpディレクトリにkvsという名前でソースコードが展開されているとします。以下に実行例を示します。

```
> cd ~/tmp/kvs      ※ ~/tmp/kvs に移動
> make              ※ コンパイル
> make install      ※ インストール（環境変数KVS_DIRで指定されたフォルダにコピーされる）
```

  * コンパイル時間は、実行環境の性能に依存しますが、約2〜3分程度かかります。コンパイルが正常に終了した後、インストールを行ってください。
  * 環境変数KVS\_DIRを、たとえば「/usr/local/kvs」と設定した場合、インストールの際にルート権限が必要となります。そのため、「make install」を実行する際は、管理者権限のあるユーザで実行してください。UbuntuやMac OS Xなどでは、sudoコマンドを利用して、以下のようにインストールすることが可能です。

```
> sudo make install
```

## 1.4.2 アンインストール ##

ソースコードをコンパイルしたディレクトリでnmakeコマンドまたはmakeコマンドに「uninstall」を付け実行することでKVSをアンインストールすることができます。また、インストールしたディレクトリ（環境変数KVS\_DIRで指定しているディレクトリ）を直接削除することでもアンインストールすることができます。各環境でのアンインストールの実行例を以下に示します。

**Windows**

```
 > cd C:\tmp\kvs
 > nmake uninstall
```

**Linux / Mac OS X**

```
 % cd ~/tmp/kvs
 % make uninstall
```

  * 管理者権限が必要な場合には、インストール時と同様に、たとえばsudoコマンドを利用して、管理者権限のあるユーザでアンインストール処理を実行してください。